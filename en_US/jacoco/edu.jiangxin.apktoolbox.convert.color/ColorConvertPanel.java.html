<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ColorConvertPanel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ApkToolBoxGUI</a> &gt; <a href="index.source.html" class="el_package">edu.jiangxin.apktoolbox.convert.color</a> &gt; <span class="el_source">ColorConvertPanel.java</span></div><h1>ColorConvertPanel.java</h1><pre class="source lang-java linenums">package edu.jiangxin.apktoolbox.convert.color;

import edu.jiangxin.apktoolbox.convert.color.colortable.IColorTable;
import edu.jiangxin.apktoolbox.convert.color.colortable.OrdinaryColorTable;
import edu.jiangxin.apktoolbox.convert.color.colortable.RalColorTable;
import edu.jiangxin.apktoolbox.swing.extend.EasyPanel;
import edu.jiangxin.apktoolbox.utils.Constants;

import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import java.awt.*;
import java.io.Serial;

public class ColorConvertPanel extends EasyPanel {
    @Serial
    private static final long serialVersionUID = 1L;

    private Color color;

    private JSpinner redSpinner;

    private JSpinner greenInRgbSpinner;

    private JSpinner blueInRgbSpinner;

    private JTextField hexInRgbTextField;

    private JSpinner hueInHsbSpinner;

    private JSpinner saturationInHsbSpinner;

    private JSpinner brightnessInHsbSpinner;

    private JSpinner hueInHslSpinner;

    private JSpinner saturationInHslSpinner;

    private JSpinner lightnessInHslSpinner;

    private JSpinner cyanInCmykSpinner;

    private JSpinner magentaInCmykSpinner;

    private JSpinner yellowInCmykSpinner;

    private JSpinner blackInCmykSpinner;

    private JSpinner lInCielabSpinner;

    private JSpinner aInCielabSpinner;

    private JSpinner bInCielabSpinner;

    private JTextField colorBoxTextField;

    private JComboBox&lt;IColorTable&gt; colorTableTypeComboBox;

    private JTable colorTable;

<span class="nc" id="L65">    private boolean isChangedByUser = true;</span>

    public ColorConvertPanel() throws HeadlessException {
<span class="nc" id="L68">        super();</span>
<span class="nc" id="L69">    }</span>

    @Override
    public void initUI() {
<span class="nc" id="L73">        add(Box.createVerticalStrut(Constants.DEFAULT_Y_BORDER));</span>
<span class="nc" id="L74">        createColorBoxPanel();</span>

<span class="nc" id="L76">        BoxLayout boxLayout = new BoxLayout(this, BoxLayout.Y_AXIS);</span>
<span class="nc" id="L77">        setLayout(boxLayout);</span>

<span class="nc" id="L79">        add(Box.createVerticalStrut(Constants.DEFAULT_Y_BORDER));</span>
<span class="nc" id="L80">        createRgbPanel();</span>

<span class="nc" id="L82">        add(Box.createVerticalStrut(Constants.DEFAULT_Y_BORDER));</span>
<span class="nc" id="L83">        createHsbPanel();</span>

<span class="nc" id="L85">        add(Box.createVerticalStrut(Constants.DEFAULT_Y_BORDER));</span>
<span class="nc" id="L86">        createHslPanel();</span>

<span class="nc" id="L88">        add(Box.createVerticalStrut(Constants.DEFAULT_Y_BORDER));</span>
<span class="nc" id="L89">        createCmykPanel();</span>

<span class="nc" id="L91">        add(Box.createVerticalStrut(Constants.DEFAULT_Y_BORDER));</span>
<span class="nc" id="L92">        createCielabPanel();</span>

<span class="nc" id="L94">        add(Box.createVerticalStrut(Constants.DEFAULT_Y_BORDER));</span>
<span class="nc" id="L95">        createColorTablePanel();</span>
<span class="nc" id="L96">    }</span>

    public void createColorBoxPanel() {
<span class="nc" id="L99">        JPanel colorBoxPanel = new JPanel();</span>
<span class="nc" id="L100">        add(colorBoxPanel);</span>
<span class="nc" id="L101">        colorBoxPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L102">        colorBoxPanel.setBorder(BorderFactory.createTitledBorder(&quot;Color Box&quot;));</span>

<span class="nc" id="L104">        JPanel xPanel = new JPanel();</span>
<span class="nc" id="L105">        colorBoxPanel.add(xPanel);</span>
<span class="nc" id="L106">        xPanel.setLayout(new BoxLayout(xPanel, BoxLayout.X_AXIS));</span>

<span class="nc" id="L108">        colorBoxTextField = new JTextField();</span>
<span class="nc" id="L109">        colorBoxTextField.setEditable(false);</span>
<span class="nc" id="L110">        colorBoxTextField.setOpaque(false);</span>

<span class="nc" id="L112">        xPanel.add(colorBoxTextField);</span>
<span class="nc" id="L113">    }</span>

    private void createRgbPanel() {
<span class="nc" id="L116">        JPanel rgbPanel = new JPanel();</span>
<span class="nc" id="L117">        add(rgbPanel);</span>
<span class="nc" id="L118">        rgbPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L119">        rgbPanel.setBorder(BorderFactory.createTitledBorder(&quot;RGB&quot;));</span>

<span class="nc" id="L121">        JPanel xPanel = new JPanel();</span>
<span class="nc" id="L122">        rgbPanel.add(xPanel);</span>
<span class="nc" id="L123">        xPanel.setLayout(new BoxLayout(xPanel, BoxLayout.X_AXIS));</span>

<span class="nc" id="L125">        JLabel rebLabel = new JLabel(&quot;R(Red, [0-255])&quot;);</span>
<span class="nc" id="L126">        redSpinner = new JSpinner();</span>
<span class="nc" id="L127">        redSpinner.setModel(new SpinnerNumberModel(0, 0, 255, 1));</span>
<span class="nc" id="L128">        redSpinner.addChangeListener(new RgbChangeListener());</span>

<span class="nc" id="L130">        JLabel greenLabel = new JLabel(&quot;G(Green, [0-255])&quot;);</span>
<span class="nc" id="L131">        greenInRgbSpinner = new JSpinner();</span>
<span class="nc" id="L132">        greenInRgbSpinner.setModel(new SpinnerNumberModel(0, 0, 255, 1));</span>
<span class="nc" id="L133">        greenInRgbSpinner.addChangeListener(new RgbChangeListener());</span>

<span class="nc" id="L135">        JLabel blueLabel = new JLabel(&quot;B(Blue, [0-255])&quot;);</span>
<span class="nc" id="L136">        blueInRgbSpinner = new JSpinner();</span>
<span class="nc" id="L137">        blueInRgbSpinner.setModel(new SpinnerNumberModel(0, 0, 255, 1));</span>
<span class="nc" id="L138">        blueInRgbSpinner.addChangeListener(new RgbChangeListener());</span>

<span class="nc" id="L140">        JLabel hexLabel = new JLabel(&quot;Hex&quot;);</span>
<span class="nc" id="L141">        hexInRgbTextField = new JTextField();</span>
<span class="nc" id="L142">        hexInRgbTextField.setToolTipText(&quot;0xFFFFFF格式常用在通用语言中(Java/C++等), #FFFFFF格式常用在标记语言中(XML/HTML等)&quot;);</span>
<span class="nc" id="L143">        hexInRgbTextField.setEditable(true);</span>
<span class="nc" id="L144">        hexInRgbTextField.getDocument().addDocumentListener(new HexDocumentListener());</span>

<span class="nc" id="L146">        xPanel.add(rebLabel);</span>
<span class="nc" id="L147">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L148">        xPanel.add(redSpinner);</span>
<span class="nc" id="L149">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L150">        xPanel.add(greenLabel);</span>
<span class="nc" id="L151">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L152">        xPanel.add(greenInRgbSpinner);</span>
<span class="nc" id="L153">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L154">        xPanel.add(blueLabel);</span>
<span class="nc" id="L155">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L156">        xPanel.add(blueInRgbSpinner);</span>
<span class="nc" id="L157">        xPanel.add(Box.createHorizontalStrut(3 * Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L158">        xPanel.add(hexLabel);</span>
<span class="nc" id="L159">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L160">        xPanel.add(hexInRgbTextField);</span>
<span class="nc" id="L161">    }</span>

    private void createHsbPanel() {
<span class="nc" id="L164">        JPanel hsbPanel = new JPanel();</span>
<span class="nc" id="L165">        add(hsbPanel);</span>
<span class="nc" id="L166">        hsbPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L167">        hsbPanel.setBorder(BorderFactory.createTitledBorder(&quot;HSB/HSV&quot;));</span>

<span class="nc" id="L169">        JPanel xPanel = new JPanel();</span>
<span class="nc" id="L170">        hsbPanel.add(xPanel);</span>
<span class="nc" id="L171">        xPanel.setLayout(new BoxLayout(xPanel, BoxLayout.X_AXIS));</span>

<span class="nc" id="L173">        JLabel hueLabel = new JLabel(&quot;H(Hue, [0-360])&quot;);</span>
<span class="nc" id="L174">        hueInHsbSpinner = new JSpinner();</span>
<span class="nc" id="L175">        hueInHsbSpinner.setModel(new SpinnerNumberModel(0, 0, 360, 1));</span>
<span class="nc" id="L176">        hueInHsbSpinner.addChangeListener(new HsbChangeListener());</span>

<span class="nc" id="L178">        JLabel saturationLabel = new JLabel(&quot;S(Saturation, [0-100])&quot;);</span>
<span class="nc" id="L179">        saturationInHsbSpinner = new JSpinner();</span>
<span class="nc" id="L180">        saturationInHsbSpinner.setModel(new SpinnerNumberModel(100, 0, 100, 1));</span>
<span class="nc" id="L181">        saturationInHsbSpinner.addChangeListener(new HsbChangeListener());</span>


<span class="nc" id="L184">        JLabel brightnessLabel = new JLabel(&quot;B/V(Brightness/Value, [0-100])&quot;);</span>
<span class="nc" id="L185">        brightnessInHsbSpinner = new JSpinner();</span>
<span class="nc" id="L186">        brightnessInHsbSpinner.setModel(new SpinnerNumberModel(100, 0, 100, 1));</span>
<span class="nc" id="L187">        brightnessInHsbSpinner.addChangeListener(new HsbChangeListener());</span>

<span class="nc" id="L189">        xPanel.add(hueLabel);</span>
<span class="nc" id="L190">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L191">        xPanel.add(hueInHsbSpinner);</span>
<span class="nc" id="L192">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L193">        xPanel.add(saturationLabel);</span>
<span class="nc" id="L194">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L195">        xPanel.add(saturationInHsbSpinner);</span>
<span class="nc" id="L196">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L197">        xPanel.add(brightnessLabel);</span>
<span class="nc" id="L198">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L199">        xPanel.add(brightnessInHsbSpinner);</span>
<span class="nc" id="L200">    }</span>

    private void createHslPanel() {
<span class="nc" id="L203">        JPanel hslPanel = new JPanel();</span>
<span class="nc" id="L204">        add(hslPanel);</span>
<span class="nc" id="L205">        hslPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L206">        hslPanel.setBorder(BorderFactory.createTitledBorder(&quot;HSL&quot;));</span>

<span class="nc" id="L208">        JPanel xPanel = new JPanel();</span>
<span class="nc" id="L209">        hslPanel.add(xPanel);</span>
<span class="nc" id="L210">        xPanel.setLayout(new BoxLayout(xPanel, BoxLayout.X_AXIS));</span>

<span class="nc" id="L212">        JLabel hueLabel = new JLabel(&quot;H(Hue, [0-360])&quot;);</span>
<span class="nc" id="L213">        hueInHslSpinner = new JSpinner();</span>
<span class="nc" id="L214">        hueInHslSpinner.setModel(new SpinnerNumberModel(0, 0, 360, 1));</span>
<span class="nc" id="L215">        hueInHslSpinner.addChangeListener(new HslChangeListener());</span>

<span class="nc" id="L217">        JLabel saturationLabel = new JLabel(&quot;S(Saturation, [0-100])&quot;);</span>
<span class="nc" id="L218">        saturationInHslSpinner = new JSpinner();</span>
<span class="nc" id="L219">        saturationInHslSpinner.setModel(new SpinnerNumberModel(100, 0, 100, 1));</span>
<span class="nc" id="L220">        saturationInHslSpinner.addChangeListener(new HslChangeListener());</span>


<span class="nc" id="L223">        JLabel lightnessLabel = new JLabel(&quot;L(Lightness, [0-100])&quot;);</span>
<span class="nc" id="L224">        lightnessInHslSpinner = new JSpinner();</span>
<span class="nc" id="L225">        lightnessInHslSpinner.setModel(new SpinnerNumberModel(50, 0, 100, 1));</span>
<span class="nc" id="L226">        lightnessInHslSpinner.addChangeListener(new HslChangeListener());</span>

<span class="nc" id="L228">        xPanel.add(hueLabel);</span>
<span class="nc" id="L229">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L230">        xPanel.add(hueInHslSpinner);</span>
<span class="nc" id="L231">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L232">        xPanel.add(saturationLabel);</span>
<span class="nc" id="L233">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L234">        xPanel.add(saturationInHslSpinner);</span>
<span class="nc" id="L235">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L236">        xPanel.add(lightnessLabel);</span>
<span class="nc" id="L237">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L238">        xPanel.add(lightnessInHslSpinner);</span>
<span class="nc" id="L239">    }</span>

    private void createCmykPanel() {
<span class="nc" id="L242">        JPanel cmykPanel = new JPanel();</span>
<span class="nc" id="L243">        add(cmykPanel);</span>
<span class="nc" id="L244">        cmykPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L245">        cmykPanel.setBorder(BorderFactory.createTitledBorder(&quot;CMYK&quot;));</span>

<span class="nc" id="L247">        JPanel xPanel = new JPanel();</span>
<span class="nc" id="L248">        cmykPanel.add(xPanel);</span>
<span class="nc" id="L249">        xPanel.setLayout(new BoxLayout(xPanel, BoxLayout.X_AXIS));</span>

<span class="nc" id="L251">        JLabel cyanLabel = new JLabel(&quot;C(Cyan, [0-100])&quot;);</span>
<span class="nc" id="L252">        cyanInCmykSpinner = new JSpinner();</span>
<span class="nc" id="L253">        cyanInCmykSpinner.setModel(new SpinnerNumberModel(100, 0, 100, 1));</span>
<span class="nc" id="L254">        cyanInCmykSpinner.addChangeListener(new CmykChangeListener());</span>

<span class="nc" id="L256">        JLabel magentaLabel = new JLabel(&quot;M(Magenta, [0-100])&quot;);</span>
<span class="nc" id="L257">        magentaInCmykSpinner = new JSpinner();</span>
<span class="nc" id="L258">        magentaInCmykSpinner.setModel(new SpinnerNumberModel(100, 0, 100, 1));</span>
<span class="nc" id="L259">        magentaInCmykSpinner.addChangeListener(new CmykChangeListener());</span>


<span class="nc" id="L262">        JLabel yellowLabel = new JLabel(&quot;Y(Yellow, [0-100])&quot;);</span>
<span class="nc" id="L263">        yellowInCmykSpinner = new JSpinner();</span>
<span class="nc" id="L264">        yellowInCmykSpinner.setModel(new SpinnerNumberModel(100, 0, 100, 1));</span>
<span class="nc" id="L265">        yellowInCmykSpinner.addChangeListener(new CmykChangeListener());</span>

<span class="nc" id="L267">        JLabel blackLabel = new JLabel(&quot;K(Black, [0-100])&quot;);</span>
<span class="nc" id="L268">        blackInCmykSpinner = new JSpinner();</span>
<span class="nc" id="L269">        blackInCmykSpinner.setModel(new SpinnerNumberModel(0, 0, 100, 1));</span>
<span class="nc" id="L270">        blackInCmykSpinner.addChangeListener(new CmykChangeListener());</span>

<span class="nc" id="L272">        xPanel.add(cyanLabel);</span>
<span class="nc" id="L273">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L274">        xPanel.add(cyanInCmykSpinner);</span>
<span class="nc" id="L275">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L276">        xPanel.add(magentaLabel);</span>
<span class="nc" id="L277">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L278">        xPanel.add(magentaInCmykSpinner);</span>
<span class="nc" id="L279">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L280">        xPanel.add(yellowLabel);</span>
<span class="nc" id="L281">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L282">        xPanel.add(yellowInCmykSpinner);</span>
<span class="nc" id="L283">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L284">        xPanel.add(blackLabel);</span>
<span class="nc" id="L285">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L286">        xPanel.add(blackInCmykSpinner);</span>
<span class="nc" id="L287">    }</span>

    private void createCielabPanel() {
<span class="nc" id="L290">        JPanel cielabPanel = new JPanel();</span>
<span class="nc" id="L291">        add(cielabPanel);</span>
<span class="nc" id="L292">        cielabPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L293">        cielabPanel.setBorder(BorderFactory.createTitledBorder(&quot;CIELAB&quot;));</span>

<span class="nc" id="L295">        JPanel xPanel = new JPanel();</span>
<span class="nc" id="L296">        cielabPanel.add(xPanel);</span>
<span class="nc" id="L297">        xPanel.setLayout(new BoxLayout(xPanel, BoxLayout.X_AXIS));</span>

<span class="nc" id="L299">        JLabel lLabel = new JLabel(&quot;L([0-100])&quot;);</span>
<span class="nc" id="L300">        lInCielabSpinner = new JSpinner();</span>
<span class="nc" id="L301">        lInCielabSpinner.setModel(new SpinnerNumberModel(50, 0, 100, 1));</span>
<span class="nc" id="L302">        lInCielabSpinner.addChangeListener(new CielabChangeListener());</span>

<span class="nc" id="L304">        JLabel magentaLabel = new JLabel(&quot;A([-128-127])&quot;);</span>
<span class="nc" id="L305">        aInCielabSpinner = new JSpinner();</span>
<span class="nc" id="L306">        aInCielabSpinner.setModel(new SpinnerNumberModel(0, -128, 127, 1));</span>
<span class="nc" id="L307">        aInCielabSpinner.addChangeListener(new CielabChangeListener());</span>


<span class="nc" id="L310">        JLabel yellowLabel = new JLabel(&quot;B([-128-127])&quot;);</span>
<span class="nc" id="L311">        bInCielabSpinner = new JSpinner();</span>
<span class="nc" id="L312">        bInCielabSpinner.setModel(new SpinnerNumberModel(0, -128, 127, 1));</span>
<span class="nc" id="L313">        bInCielabSpinner.addChangeListener(new CielabChangeListener());</span>

<span class="nc" id="L315">        xPanel.add(lLabel);</span>
<span class="nc" id="L316">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L317">        xPanel.add(lInCielabSpinner);</span>
<span class="nc" id="L318">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L319">        xPanel.add(magentaLabel);</span>
<span class="nc" id="L320">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L321">        xPanel.add(aInCielabSpinner);</span>
<span class="nc" id="L322">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L323">        xPanel.add(yellowLabel);</span>
<span class="nc" id="L324">        xPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L325">        xPanel.add(bInCielabSpinner);</span>
<span class="nc" id="L326">    }</span>

    private void createColorTablePanel() {
<span class="nc" id="L329">        JPanel colorTablePanel = new JPanel();</span>
<span class="nc" id="L330">        add(colorTablePanel);</span>
<span class="nc" id="L331">        colorTablePanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L332">        colorTablePanel.setBorder(BorderFactory.createTitledBorder(&quot;Color Table&quot;));</span>

<span class="nc" id="L334">        JPanel yPanel = new JPanel();</span>
<span class="nc" id="L335">        colorTablePanel.add(yPanel);</span>
<span class="nc" id="L336">        yPanel.setLayout(new BoxLayout(yPanel, BoxLayout.Y_AXIS));</span>

<span class="nc" id="L338">        colorTableTypeComboBox = new JComboBox&lt;&gt;();</span>
<span class="nc" id="L339">        IColorTable ordinaryColorTable = new OrdinaryColorTable();</span>
<span class="nc" id="L340">        IColorTable ralColorTable = new RalColorTable();</span>
<span class="nc" id="L341">        colorTableTypeComboBox.addItem(ordinaryColorTable);</span>
<span class="nc" id="L342">        colorTableTypeComboBox.addItem(ralColorTable);</span>
<span class="nc" id="L343">        colorTableTypeComboBox.setSelectedItem(ordinaryColorTable);</span>
<span class="nc" id="L344">        colorTableTypeComboBox.addItemListener(itemEvent -&gt; {</span>
<span class="nc" id="L345">            ColorDefaultTableModel model = (ColorDefaultTableModel) colorTable.getModel();</span>
<span class="nc" id="L346">            IColorTable selectedColorTable = (IColorTable) itemEvent.getItem();</span>
<span class="nc" id="L347">            model.setDataVector(selectedColorTable.getTableRowData(), selectedColorTable.getColumnNames());</span>
<span class="nc" id="L348">            onColorTableChanged();</span>
<span class="nc" id="L349">        });</span>

<span class="nc" id="L351">        IColorTable selectedColorTable = (IColorTable) colorTableTypeComboBox.getSelectedItem();</span>
<span class="nc" id="L352">        colorTable = new JTable(new ColorDefaultTableModel(selectedColorTable.getTableRowData(), selectedColorTable.getColumnNames()));</span>
<span class="nc" id="L353">        JScrollPane colorTableScrollPane = new JScrollPane(colorTable);</span>
<span class="nc" id="L354">        onColorTableChanged();</span>

<span class="nc" id="L356">        yPanel.add(colorTableTypeComboBox);</span>
<span class="nc" id="L357">        yPanel.add(Box.createHorizontalStrut(Constants.DEFAULT_X_BORDER));</span>
<span class="nc" id="L358">        yPanel.add(colorTableScrollPane);</span>
<span class="nc" id="L359">    }</span>

    private void onColorTableChanged() {
<span class="nc" id="L362">        IColorTable selectedColorTable = (IColorTable) colorTableTypeComboBox.getSelectedItem();</span>
<span class="nc" id="L363">        int labelIndex = selectedColorTable.getLabelIndex();</span>
<span class="nc" id="L364">        String labelName = colorTable.getColumnName(labelIndex);</span>
<span class="nc" id="L365">        colorTable.getColumn(labelName).setCellRenderer(new ColorTableCellRenderer());</span>
<span class="nc" id="L366">    }</span>

    private class ColorDefaultTableModel extends DefaultTableModel {
        @Serial
        private static final long serialVersionUID = 1L;

<span class="nc" id="L372">        public ColorDefaultTableModel(Object[][] data, Object[] columnNames) {</span>
<span class="nc" id="L373">            super(data, columnNames);</span>
<span class="nc" id="L374">        }</span>

        @Override
        public boolean isCellEditable(int row, int column) {
<span class="nc" id="L378">            return true;</span>
        }
    }

<span class="nc" id="L382">    private class ColorTableCellRenderer extends DefaultTableCellRenderer {</span>
        @Serial
        private static final long serialVersionUID = 1L;

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
<span class="nc" id="L388">            Component renderer = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);</span>
<span class="nc" id="L389">            IColorTable selectedColorTable = (IColorTable) colorTableTypeComboBox.getSelectedItem();</span>
<span class="nc bnc" id="L390" title="All 2 branches missed.">            if (selectedColorTable == null) {</span>
<span class="nc" id="L391">                return renderer;</span>
            }
<span class="nc" id="L393">            String hex = (String) colorTable.getValueAt(row, selectedColorTable.getHexIndex());</span>
<span class="nc" id="L394">            Color color = ColorUtils.hex2Color(hex);</span>
<span class="nc" id="L395">            renderer.setBackground(color);</span>
<span class="nc" id="L396">            return renderer;</span>
        }
    }

    private void syncToOthersFormat(String colorMode) {
<span class="nc bnc" id="L401" title="All 2 branches missed.">        if (!colorMode.equalsIgnoreCase(&quot;RGB&quot;)) {</span>
<span class="nc" id="L402">            redSpinner.setValue(color.getRed());</span>
<span class="nc" id="L403">            greenInRgbSpinner.setValue(color.getGreen());</span>
<span class="nc" id="L404">            blueInRgbSpinner.setValue(color.getBlue());</span>
        }
<span class="nc bnc" id="L406" title="All 2 branches missed.">        if (!colorMode.equalsIgnoreCase(&quot;HEX&quot;)) {</span>
<span class="nc" id="L407">            hexInRgbTextField.setText(ColorUtils.color2Hex(color));</span>
        }
<span class="nc bnc" id="L409" title="All 2 branches missed.">        if (!colorMode.equalsIgnoreCase(&quot;HSB&quot;)) {</span>
<span class="nc" id="L410">            int[] hsbArray = ColorUtils.color2Hsb(color);</span>
<span class="nc" id="L411">            hueInHsbSpinner.setValue(hsbArray[0]);</span>
<span class="nc" id="L412">            saturationInHsbSpinner.setValue(hsbArray[1]);</span>
<span class="nc" id="L413">            brightnessInHsbSpinner.setValue(hsbArray[2]);</span>
        }
<span class="nc bnc" id="L415" title="All 2 branches missed.">        if (!colorMode.equalsIgnoreCase(&quot;HSL&quot;)) {</span>
<span class="nc" id="L416">            int[] hsbArray = ColorUtils.color2Hsl(color);</span>
<span class="nc" id="L417">            hueInHslSpinner.setValue(hsbArray[0]);</span>
<span class="nc" id="L418">            saturationInHslSpinner.setValue(hsbArray[1]);</span>
<span class="nc" id="L419">            lightnessInHslSpinner.setValue(hsbArray[2]);</span>
        }
<span class="nc bnc" id="L421" title="All 2 branches missed.">        if (!colorMode.equalsIgnoreCase(&quot;CMYK&quot;)) {</span>
<span class="nc" id="L422">            int[] cmykArray = ColorUtils.color2Cmyk(color);</span>
<span class="nc" id="L423">            cyanInCmykSpinner.setValue(cmykArray[0]);</span>
<span class="nc" id="L424">            magentaInCmykSpinner.setValue(cmykArray[1]);</span>
<span class="nc" id="L425">            yellowInCmykSpinner.setValue(cmykArray[2]);</span>
<span class="nc" id="L426">            blackInCmykSpinner.setValue(cmykArray[3]);</span>
        }
<span class="nc bnc" id="L428" title="All 2 branches missed.">        if (!colorMode.equalsIgnoreCase(&quot;CIELAB&quot;)) {</span>
<span class="nc" id="L429">            int[] cielabArray = ColorUtils.color2Cielab(color);</span>
<span class="nc" id="L430">            lInCielabSpinner.setValue(cielabArray[0]);</span>
<span class="nc" id="L431">            aInCielabSpinner.setValue(cielabArray[1]);</span>
<span class="nc" id="L432">            bInCielabSpinner.setValue(cielabArray[2]);</span>
        }
<span class="nc" id="L434">        colorBoxTextField.setBackground(color);</span>
        //paint the color box with the converted output color
<span class="nc" id="L436">        colorBoxTextField.setOpaque(true);</span>
<span class="nc" id="L437">    }</span>

<span class="nc" id="L439">    class RgbChangeListener implements ChangeListener {</span>
        @Override
        public void stateChanged(ChangeEvent e) {
<span class="nc bnc" id="L442" title="All 2 branches missed.">            if (!isChangedByUser) {</span>
<span class="nc" id="L443">                return;</span>
            }
<span class="nc" id="L445">            isChangedByUser = false;</span>
<span class="nc" id="L446">            int red = (Integer) redSpinner.getValue();</span>
<span class="nc" id="L447">            int green = (Integer) greenInRgbSpinner.getValue();</span>
<span class="nc" id="L448">            int blue = (Integer) blueInRgbSpinner.getValue();</span>
<span class="nc" id="L449">            color = new Color(red, green, blue);</span>
<span class="nc" id="L450">            syncToOthersFormat(&quot;RGB&quot;);</span>
<span class="nc" id="L451">            isChangedByUser = true;</span>
<span class="nc" id="L452">        }</span>
    }

<span class="nc" id="L455">    class HsbChangeListener implements ChangeListener {</span>
        @Override
        public void stateChanged(ChangeEvent e) {
<span class="nc bnc" id="L458" title="All 2 branches missed.">            if (!isChangedByUser) {</span>
<span class="nc" id="L459">                return;</span>
            }
<span class="nc" id="L461">            isChangedByUser = false;</span>
<span class="nc" id="L462">            int hue = (Integer) hueInHsbSpinner.getValue();</span>
<span class="nc" id="L463">            int saturation = (Integer) saturationInHsbSpinner.getValue();</span>
<span class="nc" id="L464">            int brightness = (Integer) brightnessInHsbSpinner.getValue();</span>
<span class="nc" id="L465">            color = ColorUtils.hsb2Color(hue, saturation, brightness);</span>
<span class="nc" id="L466">            syncToOthersFormat(&quot;HSB&quot;);</span>
<span class="nc" id="L467">            isChangedByUser = true;</span>
<span class="nc" id="L468">        }</span>
    }

<span class="nc" id="L471">    class HslChangeListener implements ChangeListener {</span>
        @Override
        public void stateChanged(ChangeEvent e) {
<span class="nc bnc" id="L474" title="All 2 branches missed.">            if (!isChangedByUser) {</span>
<span class="nc" id="L475">                return;</span>
            }
<span class="nc" id="L477">            isChangedByUser = false;</span>
<span class="nc" id="L478">            int hue = (Integer) hueInHslSpinner.getValue();</span>
<span class="nc" id="L479">            int saturation = (Integer) saturationInHslSpinner.getValue();</span>
<span class="nc" id="L480">            int lightness = (Integer) lightnessInHslSpinner.getValue();</span>
<span class="nc" id="L481">            color = ColorUtils.hsl2Color(hue, saturation, lightness);</span>
<span class="nc" id="L482">            syncToOthersFormat(&quot;HSL&quot;);</span>
<span class="nc" id="L483">            isChangedByUser = true;</span>
<span class="nc" id="L484">        }</span>
    }

<span class="nc" id="L487">    class CmykChangeListener implements ChangeListener {</span>
        @Override
        public void stateChanged(ChangeEvent e) {
<span class="nc bnc" id="L490" title="All 2 branches missed.">            if (!isChangedByUser) {</span>
<span class="nc" id="L491">                return;</span>
            }
<span class="nc" id="L493">            isChangedByUser = false;</span>
<span class="nc" id="L494">            int cyan = (Integer) cyanInCmykSpinner.getValue();</span>
<span class="nc" id="L495">            int magenta = (Integer) magentaInCmykSpinner.getValue();</span>
<span class="nc" id="L496">            int yellow = (Integer) yellowInCmykSpinner.getValue();</span>
<span class="nc" id="L497">            int black = (Integer) blackInCmykSpinner.getValue();</span>
<span class="nc" id="L498">            color = ColorUtils.cmyk2Color(cyan, magenta, yellow, black);</span>
<span class="nc" id="L499">            syncToOthersFormat(&quot;CMYK&quot;);</span>
<span class="nc" id="L500">            isChangedByUser = true;</span>
<span class="nc" id="L501">        }</span>
    }

<span class="nc" id="L504">    class CielabChangeListener implements ChangeListener {</span>
        @Override
        public void stateChanged(ChangeEvent e) {
<span class="nc bnc" id="L507" title="All 2 branches missed.">            if (!isChangedByUser) {</span>
<span class="nc" id="L508">                return;</span>
            }
<span class="nc" id="L510">            isChangedByUser = false;</span>
<span class="nc" id="L511">            int l = (Integer) lInCielabSpinner.getValue();</span>
<span class="nc" id="L512">            int a = (Integer) aInCielabSpinner.getValue();</span>
<span class="nc" id="L513">            int b = (Integer) bInCielabSpinner.getValue();</span>
<span class="nc" id="L514">            color = ColorUtils.cielab2Color(l, a, b);</span>
<span class="nc" id="L515">            syncToOthersFormat(&quot;CIELAB&quot;);</span>
<span class="nc" id="L516">            isChangedByUser = true;</span>
<span class="nc" id="L517">        }</span>
    }

<span class="nc" id="L520">    class HexDocumentListener implements DocumentListener {</span>
        @Override
        public void insertUpdate(DocumentEvent e) {
<span class="nc" id="L523">            onValueUpdate();</span>
<span class="nc" id="L524">        }</span>

        @Override
        public void removeUpdate(DocumentEvent e) {
<span class="nc" id="L528">            onValueUpdate();</span>
<span class="nc" id="L529">        }</span>

        @Override
        public void changedUpdate(DocumentEvent e) {
<span class="nc" id="L533">            onValueUpdate();</span>
<span class="nc" id="L534">        }</span>

        private void onValueUpdate() {
<span class="nc bnc" id="L537" title="All 2 branches missed.">            if (!isChangedByUser) {</span>
<span class="nc" id="L538">                return;</span>
            }
<span class="nc" id="L540">            isChangedByUser = false;</span>
<span class="nc" id="L541">            String hex = hexInRgbTextField.getText();</span>
            try {
<span class="nc" id="L543">                color = ColorUtils.hex2Color(hex);</span>
<span class="nc" id="L544">                syncToOthersFormat(&quot;HEX&quot;);</span>
<span class="nc" id="L545">            } catch (NumberFormatException e) {</span>
<span class="nc" id="L546">                logger.error(&quot;Invalid hex value: {}&quot;, hex);</span>
<span class="nc" id="L547">            }</span>
<span class="nc" id="L548">            isChangedByUser = true;</span>
<span class="nc" id="L549">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>